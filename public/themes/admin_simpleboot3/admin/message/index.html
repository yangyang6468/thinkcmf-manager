<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">

    <link rel="stylesheet" type="text/css" href="css/total.css">
    <style type="text/css">

        #Barrage {
            width: 500px;
            height: 400px;
            /* border:1px solid rgba(204, 204, 204,.2); */
            border-radius: 11px;
            position: absolute;

            overflow: hidden;
        }

        .BarMes {
            border-radius: 5px;
            background-color: rgba(205, 204, 204,.4);
            border: 1px solid rgba(204, 204, 204,.2);
            padding: 0 10px;
            height: 40px;
            display: table;
            /* 文字自适应 */
            float: right;
        }

        ul {
            display: block;
            margin-top: 0px;
        }

        li {
            border-radius: 5px;
            list-style-type: none;
            width: 100%;
            display: inline-block;
            text-align: center;
            line-height: 38px;
            font-family: '仿宋';
            margin-top: 10px;
            word-break: keep-all;
            /* 不换行 */
            white-space: nowrap;
            /* 不换行 */
            overflow: hidden;
            /* 内容超出宽度时隐藏超出部分的内容 */
            text-overflow: ellipsis;
            /*溢出时显示省略标记...；需与overflow:hidden;一起使用*/
            /* border: 1px solid #000; */
        }

        @-webkit-keyframes anim1 {
            0% {
                top: 48px;
                opacity: 1
            }

            50% {
                top: -48px;
                opacity: 1
            }

            75% {
                top: -48px;
                opacity: 0
            }

            100% {
                top: 48px;
                opacity: 0
            }
        }

        @-webkit-keyframes anim2 {
            0% {
                top: 0px
            }

            25% {
                top: -20px
            }

            50% {
                top: -35px
            }

            75% {
                top: -45px
            }

            100% {
                top: -55px
            }
        }

        .BarMes1:nth-child(n+1) {
            -webkit-animation: anim2  1s  linear;
            /* linear infinite */
            animation-fill-mode: forwards;
        }

        /**/
        .txt{
            border: 2px solid #CCCCCC;
            outline-style:none;
            border-radius:5px;
            padding-left:4px;
            background-color: #F0F0F0;
        }
        .txt:focus{
            border: 2px solid #66CCFF;
        }
        .small{
            height:25px;
            width:177px;
            font-size:20px;
        }
        .medium{
            height:30px;
            width:177px;
            font-size:20px;
        }
        .large{
            height:40px;
            width:177px;
            font-size:20px;
        }
        /*
        ����ͼ���TXT����?
        **/
        .txt_img{
            width: 250px;
            height: 35px;
            border: 2px solid #cccccc;
            border-radius:5px;

        }
        .txt_img:focus{
            border: 2px solid #66CCFF;
            background-color: #66CCFF;
        }
        .txt_img_i{
            width: 72%;
            font-size: 20px;
            padding-left:4px;
            height: 100%;
            float: left;
        }
        .txt_img_i,.txt_img_i input{
            border: 0;
            outline-style: none;
        }
        .txt_img_s{
            display:block;
            float:right;
            text-align:center;
            color:#FFF;
            width: 20%;
            border-right-radius:5px;
            font-size: 20px;
            padding-left:4px;
            height: 100%;
            background-color: #CCCCCC;
        }
        .txt_focus{
            border: 2px solid #99CCFF;
        }
        .txt_img_se{
            background-color: #99CCFF;
        }
        /*
        *��ť��ʽ
        *cursor:pointer����Ϊ��
        */
        .button_ita{
            margin-top:5px;
            outline-style:none;
            text-align:center;
            cursor:pointer;
            width: 70px;
            height: 40px;
            border-radius:5px;
            border: 0px solid #99CCFF;
            background-color: rgba(72, 201, 176,0.4);
        }
        .button_ita:hover{
            background-color: rgba(72, 201, 176,0.7);
        }
        .button_ita:focus{
            background-color: rgba(72, 201, 176,1);
        }
        .chec_i{

            border:2px solid #000;
            outline-style:none;
            width: 40px;
            height: 40px;
        }

        input[type="checkbox"] + label::before {
            content: "\a0";  /*�����пո�*/
            display: inline-block;
            vertical-align: 25px;
            width: 30px;
            height: 30px;
            margin-right: 10px;
            border-radius: 4px;
            border:2px solid #CCCCCC;
            background-color: #FFF;
            text-indent: 10px;
            line-height: 25px;
        }
        input[type="checkbox"]:checked + label::before {
            content: "\2713";
            width:30px;
            height:30px;
            font-size:20px;
            font-weight:900;
            background-color: yellowgreen;
        }
        input[type="checkbox"]:hover + label::before {
            content: "\2713";
            width:30px;
            height:30px;
            background-color:rgba(204,204,204,0.6);
            color:#FFF;
            font-weight:bolder;

        }
        table { border-collapse: collapse;}

        .tab{
            width:800px;
            height: 400px;
            margin: 0 auto;
        }



    </style>

<body>
<div>
    <input type="button" value="test" onClick="bar()" class="button_ita" />
    <form action="" method="post" id="f2">
        <input type="text" name="name" placeholder="输入内容" class="txt large" id="txtbar" />
        <input type="button" class="button_ita" value="发送" onClick="pub()" />
    </form>
    <div id="Barrage">
        <ul>
            <li>
                <div class="BarMes">
                    但愿人长久，千里共嫦娟
                </div></li>
        </ul>
    </div>
</div>
</body>
<script src="__STATIC__/js/jquery.min.js"></script>

<script type="text/javascript">

    setInterval(function() {bar();}, 2000);
    var a = $(".BarMes").size();
    function bar() {
        $("ul li:eq(0)").animate({"margin-top": "-42px"}, "slow");
        setTimeout(function() {$("ul li:eq(0)").remove();}, 1000);
        if ($("li").size() <= 8) {
            add();
        }

    }

    var data = [
        {
            url: "javascript:void(0)",
            text: "北国冰封，千里冰封，万里雪飘"
        },
        {
            url: "javascript:void(0)",
            text: "待从头收拾旧山河，朝天阙"
        },
        {
            url: "javascript:void(0)",
            text: "但愿人长久千里共婵娟"
        },
        {
            url: "javascript:void(0)",
            text: "才下船头却上心头"
        }];
    //从后台取数据
    $.ajax({
        url: "http://localhost/Ehcache/baraage",//服务器端应改为服务器端的地址
        type: "post",
        async: false,
        success: function(st) {
            $.extend(true, data, st); //st覆盖data
        }
    });
    var num = data.length;
    for (var i = 0; i < num; i++) {
        $("ul").append("<li><div class='BarMes'>" + data[i].text + "</div></li>");
    }

    function add() {
//        $.ajax({
//            url: "****",
//            type: "post",
//            async: false,
//            success: function(st) {
//                $.extend(true, data, st);
//
//            }
//        });
        var num = data.length;
        for (var i = 0; i < num; i++) {
            $("ul").append("<li><div class='BarMes'>" + data[i].text + "</div></li>");
        }

    }


</script>


</html>
